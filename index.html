<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GD Demon Rating</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
<h1>–†–µ–π—Ç–∏–Ω–≥ —Å–ª–æ–∂–Ω–µ–π—à–∏—Ö –¥–µ–º–æ–Ω–æ–≤ –ë—Ä—è–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</h1>
</header>

<main>
<section class="controls">
  <button id="addBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
  <button id="syncGdlBtn" onclick="syncWithGDL()" style="display: none; background: #2196f3;">üåç –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å GDL</button>
  <button id="showAllVictorsBtn">üëë –í—Å–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏</button>
</section>

<section>
<h2>–¢–æ–ø-–ª–∏—Å—Ç</h2>
<ul id="levelList"></ul>
</section>

<section class="player-rating-section">
  <h2>üèÜ –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
  
  <div class="rating-controls">
    <button onclick="recalculateAllRatingsSimple()" style="background: #ff9800;">
    üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥
    </button>
    <button onclick="showPointsInfo()" style="background: #2196f3;">
      ‚ÑπÔ∏è –ö–∞–∫ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ—á–∫–∏?
    </button>
  </div>
  
  <div class="rating-filters">
    <div class="filter-controls">
      <button onclick="toggleAllPlayers()" style="background: #2196f3; margin-bottom: 10px;">
        üéÆ –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö
      </button>
      <button onclick="clearAllPlayers()" style="background: #666; margin-bottom: 10px;">
        ‚ùå –û—á–∏—Å—Ç–∏—Ç—å –≤—ã–±–æ—Ä
      </button>
    </div>
    
    <div class="players-checkboxes" id="playersCheckboxes">
      <!-- –ß–µ–∫–±–æ–∫—Å—ã –∏–≥—Ä–æ–∫–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      <div class="loading-checkboxes">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤...</div>
    </div>
  </div>
  
  <div class="ratings-list" id="playerRatingsList">
    <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
  </div>
</section>

<!-- –°–µ–∫—Ü–∏—è –ú–∞—à–∏–Ω—ã –≤—Ä–µ–º–µ–Ω–∏ -->
<section class="timeline-section">
  <h2>‚è∞ –ú–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏</h2>
  
  <div class="timeline-controls">
    <div class="timeline-controls-row">
      <button onclick="createTimelineSnapshot()" style="background: #9c27b0; display: none;">
        üì∏ –°–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫ —Å–µ–π—á–∞—Å
      </button>
      <button onclick="toggleTimelineView()" style="background: #2196f3;">
        üìÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ –¥–∞—Ç–∞–º
      </button>
      <button onclick="exitTimelineMode()" style="background: #e53935; display: none;" id="exitTimelineBtn">
        üö™ –í—ã–π—Ç–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ –∏—Å—Ç–æ—Ä–∏–∏
      </button>
    </div>
  </div>
  
  <div class="timeline-filters" id="timelineFilters" style="display: none;">
    <div class="date-selector">
      <h4>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:</h4>
      <input type="date" 
             id="historyDate" 
             onchange="loadDateSnapshot()"
             max="">
      <button onclick="loadYesterday()" style="background: #666; margin-left: 10px;">
        ‚óÄÔ∏è –í—á–µ—Ä–∞
      </button>
      <button onclick="loadToday()" style="background: #4caf50; margin-left: 5px;">
        –°–µ–≥–æ–¥–Ω—è ‚ñ∂Ô∏è
      </button>
    </div>
    
    <div class="date-navigation">
      <button onclick="prevDay()">‚óÄÔ∏è –ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å</button>
      <button onclick="nextDay()">–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å ‚ñ∂Ô∏è</button>
    </div>
    
    <div class="timeline-calendar" id="timelineCalendar">
      <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>
  </div>
  
  <div class="current-timeline-info" id="currentTimelineInfo" style="display: none;">
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–π –¥–∞—Ç–µ -->
  </div>
</section>
</main>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è -->
<div id="victorsModal" class="modal">
  <div class="modal-content">
    <h3>–ü–æ–±–µ–¥–∏—Ç–µ–ª–∏ —É—Ä–æ–≤–Ω—è: <span id="currentLevelName"></span></h3>
    
    <div class="victors-list" id="victorsList">
      <!-- –°–ø–∏—Å–æ–∫ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>
    
    <div class="add-victor-form">
      <h4>–î–æ–±–∞–≤–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è</h4>
      <input type="text" id="playerNameInput" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" />
      <input type="text" id="proofLinkInput" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" />
      <button onclick="addVictor()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è</button>
    </div>
    
    <div class="modal-buttons">
      <button onclick="closeVictorsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Å–µ—Ö –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π -->
<div id="allVictorsModal" class="modal">
  <div class="modal-content">
    <h3>üëë –í—Å–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞</h3>
    
    <div class="filters">
      <select id="levelFilter">
        <option value="all">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
        <!-- –û–ø—Ü–∏–∏ —É—Ä–æ–≤–Ω–µ–π –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </select>
    </div>
    
    <div class="all-victors-list" id="allVictorsList">
      <!-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>
    
    <div class="modal-buttons">
      <button onclick="closeAllVictorsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–∏—Å—Ç–µ–º–µ –æ—á–∫–æ–≤ -->
<div id="pointsInfoModal" class="modal">
  <div class="modal-content">
    <h3>‚ÑπÔ∏è –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤</h3>
    
    <div class="points-info">
      <p><strong>–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤:</strong></p>
      
      <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–∑–∏—Ü–∏–∏ —É—Ä–æ–≤–Ω—è –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ:</p>
      <ul>
        <li><strong>1 –º–µ—Å—Ç–æ:</strong> 1000 –æ—á–∫–æ–≤</li>
        <li><strong>2-10 –º–µ—Å—Ç–∞:</strong> 1000 - (–º–µ—Å—Ç–æ - 1) √ó 40</li>
        <li><strong>11-25 –º–µ—Å—Ç–∞:</strong> 640 - (–º–µ—Å—Ç–æ - 10) √ó 20</li>
        <li><strong>26-50 –º–µ—Å—Ç–∞:</strong> 340 - (–º–µ—Å—Ç–æ - 25) √ó 8</li>
        <li><strong>–ü–æ—Å–ª–µ 50 –º–µ—Å—Ç–∞:</strong> 0 –æ—á–∫–æ–≤</li>
      </ul>
      
      <h4>–ü—Ä–∏–º–µ—Ä—ã:</h4>
      <div class="examples">
        <div class="example">
          <span class="level-pos">1-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">1000 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">2-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">1000 - (2-1)√ó40 = 960 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">5-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">1000 - (5-1)√ó40 = 840 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">10-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">1000 - (10-1)√ó40 = 640 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">15-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">640 - (15-10)√ó20 = 540 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">25-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">640 - (25-10)√ó20 = 340 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">30-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">340 - (30-25)√ó8 = 300 –æ—á–∫–æ–≤</span>
        </div>
        <div class="example">
          <span class="level-pos">50-–µ –º–µ—Å—Ç–æ:</span>
          <span class="level-points">340 - (50-25)√ó8 = 140 –æ—á–∫–æ–≤</span>
        </div>
      </div>
      
      <p class="note">üìù <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π, –æ—á–∫–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è. –ö–∞–∂–¥—ã–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –æ—á–∫–∏ –∑–∞ —É—Ä–æ–≤–µ–Ω—å.</p>
    </div>
    
    <div class="modal-buttons">
      <button onclick="closePointsInfoModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>